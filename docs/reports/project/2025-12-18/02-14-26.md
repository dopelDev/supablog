Supablog Project Report

Summary:

- Prototype Nuxt 4 app (blog starter) using Bulma + SCSS, designed around a “newspaper” aesthetic and intended to use Supabase.
- This report captures the observed frontend structure, local Supabase Docker Compose stack, design system, and operational entry points for future agents/humans.

Repo Fingerprint:

- HEAD: 75f4695de08b324f31bcbfd09d72137ee38ed05b
- Working tree: dirty
- Fingerprint: 3b916ed72aa032c9b94c23a2d7b130303826523f
- Generated at: 2025-12-18 02:14:26 -05

Project Map:

- Docker Compose Supabase stack: local Postgres + REST/Auth/Realtime/Storage + Studio behind a single nginx gateway port.
- Nuxt frontend app: routes/layouts/components implemented under `app/` and wired via `nuxt.config.ts`.
- Supabase client integration: `supabase-js` client provided to the Nuxt app via a client-only plugin and accessed via a composable.
- Design system: SCSS tokens → CSS variables, Bulma typography override, dark-mode support, and small UI primitives.
- Docs & assets: README quickstart, design documentation, and reference/mockup images.

Key Components:

- `docker-compose.yml`: defines local Supabase-like services (`db`, `rest`, `auth`, `realtime`, `storage`, `meta`, `api`, `studio`), host ports (`5432`, `54321`, `54323`), and persistent volumes (`db-data`, `storage-data`).
- `docker/nginx/supabase.conf`: routes `/rest/v1/`, `/auth/v1/`, `/realtime/v1/` (websocket upgrade), and `/storage/v1/` to internal containers, matching the typical Supabase endpoint layout.
- `nuxt.config.ts`: points Nuxt `dir` entries to `app/pages`, `app/layouts`, `app/composables`, and `plugins`; configures Vite aliases and the custom `scssAliasPlugin`; exposes `runtimeConfig.public.supabaseUrl/supabaseAnonKey`.
- `plugins/supabase.client.ts`: creates a browser Supabase client from `runtimeConfig.public`, warns when missing config, and injects `$supabase` into the Nuxt app (architectural choice: central client instance via Nuxt plugin rather than per-call construction).
- `app/composables/useSupabaseClient.ts`: typed accessor for `$supabase` that throws early if the client is unavailable (trade-off: fast failure vs allowing “optional Supabase” operation).
- `app/assets/styles/*` + `vite-scss-alias.ts`: SCSS token layer (`_colors.scss`) feeds CSS variables (`_globals.scss`) used by components; Bulma is imported with typography config only (`_bulma-overrides.scss`) (trade-off: consistent theming via CSS vars vs deeper Bulma color theming).
- `app/composables/useDarkMode.ts` + `app/layouts/default.vue`: dark mode is applied via `body.dark`, persisted to `localStorage`, and toggled via a fixed-position UI button.
- `app/pages/test-ui.vue`: manual test page to visualize current color tokens, fonts, and UI components under light/dark modes.
- `app/ui/*`: small presentational components (`ClassifiedsRibbon`, `ArrowDivider`, `ClassifiedsBox`) that consume CSS variables for theming.

Operational Notes:

- Local backend: `docker compose up -d` (exposes gateway `http://localhost:54321`, Studio `http://localhost:54323`, Postgres on `localhost:5432`).
- Frontend: `npm install` then `npm run dev` (Nuxt dev server; default is typically `http://localhost:3000`).
- Runtime config: `.env` (copied from `.env.example`) provides `SUPABASE_URL` and `SUPABASE_ANON_KEY` to `runtimeConfig.public` (client-exposed by design).
- Storage service uses a local file backend with a Docker volume (`storage-data`).
- No database migrations/seed SQL were observed in-repo (constraint: schema changes likely need to be managed manually or added later).

Risks / Implications:

- Security: medium — `.env.example` contains local JWT/service keys and the Docker stack exposes Postgres on the host; safe for local dev, but easy to misapply to production.
- Ops: low — standard Node + Docker Compose workflow, but multi-container stack increases moving parts vs a managed Supabase project.
- Compatibility: low — the project is pinned to specific container image tags and Nuxt `compatibilityDate`; upgrades may require coordinated changes.
- User-facing: low — frontend routes are minimal and currently do not demonstrate end-to-end Supabase-backed blog features.

Verification:

- Read: `README.md`, `docker-compose.yml`, `docker/nginx/supabase.conf`, `nuxt.config.ts`, `package.json`, `docs/DESIGN.md`, and key `app/` + `plugins/` files.
- Repo fingerprint computed from tracked files excluding `docs/reports/project/`.
- Not run: `docker compose up`, `npm run dev`, or any runtime verification in a browser.

Follow-ups:

- Confirm the intended data model and where schema/migrations should live (e.g., SQL files, Supabase CLI, or a migrations tool).
- Decide whether `POSTGRES` should be exposed on `localhost:5432` by default (or limited to Docker network only).
- Ensure production guidance exists for `SUPABASE_URL` and keys (and that service role keys are never used client-side).
